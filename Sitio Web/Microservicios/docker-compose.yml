version: '3.7'
services:
    bar:
        build: ./BarMicro
        depends_on:
            - mongo
        environment:
            - MONGO_DB_CNN=mongodb://mongo/BarMicro
    monolitico:
        build: ./monolitico
        depends_on:
            - mongo
        environment:
            - MONGO_DB_CNN=mongodb://mongo/BaresULEAM
    nginx:
        image: nginx:latest
        ports:
            - '8080:8080'
        volumes:
            - ./nginx.conf:/etc/nginx/conf.d/default.conf
        depends_on:
            - monolitico
            - bar
    mongo:
        image: mongo:latest
        ports:
            - '27019:27017'
        command: mongod --quiet --logpath /dev/null
